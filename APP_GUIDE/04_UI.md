# 03 - Layout, UI/UX y Mejores Pr√°cticas

## 1. Stack de UI Recomendado

| Librer√≠a | Prop√≥sito | Instalaci√≥n |
|----------|-----------|-------------|
| **shadcn/ui** | Componentes base | `npx shadcn@latest init` |
| **Tailwind CSS** | Utilidades CSS | Ya incluido |
| **Sonner / React-Toastify** | Notificaciones | `npm install sonner` |
| **Lucide React** | Iconos | `npm install lucide-react` |

---

## 2. Instalaci√≥n de shadcn/ui

### 2.1 Inicializaci√≥n

```bash
npx shadcn@latest init
```

Responder a las preguntas:
- Style: Default
- Base color: Slate (o el que prefieras)
- CSS variables: Yes

### 2.2 Componentes Esenciales

```bash
# Instalar componentes necesarios
npx shadcn@latest add button
npx shadcn@latest add input
npx shadcn@latest add label
npx shadcn@latest add card
npx shadcn@latest add table
npx shadcn@latest add dialog
npx shadcn@latest add sheet        # Para side modals
npx shadcn@latest add select
npx shadcn@latest add badge
npx shadcn@latest add dropdown-menu
npx shadcn@latest add toast        # O usar Sonner
npx shadcn@latest add form
npx shadcn@latest add separator
```

### 2.3 Estructura de Carpetas shadcn

```
frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/              # Componentes shadcn
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ button.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ card.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sheet.tsx    # Side modal
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Layout.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ lib/
‚îÇ       ‚îî‚îÄ‚îÄ utils.ts         # cn() helper
```

---

## 3. Layout Principal (OBLIGATORIO)

> **Referencia:** Basado en [Dashboard Design Patterns](https://dashboarddesignpatterns.github.io/patterns.html) y [mejores pr√°cticas 2024](https://www.shaheermalik.com/blog/dashboard-design-15-best-practices-of-dashboard-design)

### 3.1 Estructura del Layout

> **‚ö†Ô∏è REGLA CR√çTICA:** El usuario y logout van en el **HEADER**, NUNCA en el sidebar. El sidebar es SOLO para navegaci√≥n.

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           HEADER (Top Bar)                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ [‚ò∞]  "Bienvenido, Juan"              [üé® Paleta] [üë§ Usuario] ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                                       ‚îî‚îÄdropdown‚îÄ‚îò‚îî‚îÄdropdown‚îÄ‚îò‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ   SIDEBAR    ‚îÇ                    MAIN CONTENT                      ‚îÇ
‚îÇ   (w-64)     ‚îÇ                                                      ‚îÇ
‚îÇ              ‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ     ‚îÇ  Page Title + Actions                    ‚îÇ     ‚îÇ
‚îÇ  ‚îÇ  Logo  ‚îÇ  ‚îÇ     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ     ‚îÇ                                          ‚îÇ     ‚îÇ
‚îÇ              ‚îÇ     ‚îÇ     Content Area                         ‚îÇ     ‚îÇ
‚îÇ  Navigation  ‚îÇ     ‚îÇ     (Cards, Tables, Forms)               ‚îÇ     ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ     ‚îÇ                                          ‚îÇ     ‚îÇ
‚îÇ  - Dashboard ‚îÇ     ‚îÇ                                          ‚îÇ     ‚îÇ
‚îÇ  - Reclamos  ‚îÇ     ‚îÇ                                          ‚îÇ     ‚îÇ
‚îÇ  - Mapa      ‚îÇ     ‚îÇ                                          ‚îÇ     ‚îÇ
‚îÇ  - Cuadrillas‚îÇ     ‚îÇ                                          ‚îÇ     ‚îÇ
‚îÇ              ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ              ‚îÇ                                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3.2 Distribuci√≥n de Elementos

| Zona | Contenido | NO incluir |
|------|-----------|------------|
| **Header izquierda** | Bot√≥n men√∫ (m√≥vil), mensaje bienvenida | - |
| **Header derecha** | Selector paleta, Men√∫ usuario (avatar + dropdown con logout) | - |
| **Sidebar** | Logo, Links de navegaci√≥n | ‚ùå NO usuario, ‚ùå NO logout |
| **Main content** | T√≠tulo p√°gina, contenido, formularios, tablas | - |

### 3.3 Elementos del Header

El header debe incluir (de izquierda a derecha):

**Lado izquierdo:**
1. **Bot√≥n hamburguesa** (solo visible en m√≥vil, abre sidebar)
2. **Mensaje de bienvenida** (opcional, ej: "Bienvenido, Juan")

**Lado derecho:**
1. **Selector de paleta** (icono de paleta + dropdown con 5 colores)
2. **Men√∫ de usuario** (avatar con iniciales + dropdown):
   - Nombre completo y rol
   - Separador
   - Bot√≥n "Cerrar sesi√≥n"

### 3.3 Layout.tsx Completo con shadcn

```tsx
// src/components/Layout.tsx
import { useState } from 'react';
import { Outlet, Link, useLocation, useNavigate } from 'react-router-dom';
import { useAuth } from '@/contexts/AuthContext';
import { useTheme } from '@/contexts/ThemeContext';
import { Button } from '@/components/ui/button';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
  DropdownMenuSeparator,
} from '@/components/ui/dropdown-menu';
import {
  Home,
  ClipboardList,
  Map,
  Users,
  PlusCircle,
  Menu,
  X,
  LogOut,
  Wrench,
  FileText,
  Palette,
  User,
  Settings,
} from 'lucide-react';

const THEME_COLORS = [
  { name: 'Verde Municipal', value: 'municipal', primary: '#16a34a' },
  { name: 'Azul Corporativo', value: 'corporate', primary: '#2563eb' },
  { name: 'Morado Elegante', value: 'purple', primary: '#7c3aed' },
  { name: 'Naranja Energ√≠a', value: 'orange', primary: '#ea580c' },
  { name: 'Gris Neutro', value: 'neutral', primary: '#525252' },
];

export default function Layout() {
  const { user, logout } = useAuth();
  const { theme, setTheme } = useTheme();
  const location = useLocation();
  const navigate = useNavigate();
  const [sidebarOpen, setSidebarOpen] = useState(false);

  const handleLogout = () => {
    logout();
    navigate('/login');
  };

  const isAdmin = user?.role === 'admin' || user?.role === 'supervisor';
  const isCuadrilla = user?.role === 'cuadrilla';

  const navigation = [
    { name: 'Dashboard', href: '/', icon: Home, show: isAdmin },
    { name: 'Nuevo Reclamo', href: '/reclamos/nuevo', icon: PlusCircle, show: true },
    { name: 'Mis Reclamos', href: '/mis-reclamos', icon: FileText, show: user?.role === 'vecino' },
    { name: 'Reclamos', href: '/reclamos', icon: ClipboardList, show: isAdmin },
    { name: 'Mapa', href: '/mapa', icon: Map, show: true },
    { name: 'Tablero Cuadrilla', href: '/tablero', icon: Wrench, show: isCuadrilla || isAdmin },
    { name: 'Cuadrillas', href: '/cuadrillas', icon: Users, show: isAdmin },
  ].filter((item) => item.show);

  return (
    <div className="min-h-screen bg-background flex">
      {/* Mobile sidebar overlay */}
      {sidebarOpen && (
        <div
          className="fixed inset-0 z-40 bg-black/50 lg:hidden"
          onClick={() => setSidebarOpen(false)}
        />
      )}

      {/* Sidebar */}
      <aside
        className={`fixed inset-y-0 left-0 z-50 w-64 bg-card border-r transform transition-transform duration-300
          lg:translate-x-0 lg:relative flex-shrink-0 flex flex-col
          ${sidebarOpen ? 'translate-x-0' : '-translate-x-full'}`}
      >
        {/* Logo */}
        <div className="flex items-center justify-between h-16 px-6 border-b">
          <Link to="/" className="flex items-center space-x-2">
            <div className="w-8 h-8 bg-primary rounded-lg flex items-center justify-center">
              <span className="text-primary-foreground font-bold">R</span>
            </div>
            <span className="text-lg font-bold">Reclamos</span>
          </Link>
          <Button variant="ghost" size="icon" className="lg:hidden" onClick={() => setSidebarOpen(false)}>
            <X className="h-5 w-5" />
          </Button>
        </div>

        {/* Navigation - SOLO links, NO usuario aqu√≠ */}
        <nav className="flex-1 px-4 py-4 space-y-1 overflow-y-auto">
          {navigation.map((item) => {
            const isActive = location.pathname === item.href;
            const Icon = item.icon;
            return (
              <Link
                key={item.name}
                to={item.href}
                className={`flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors ${
                  isActive
                    ? 'bg-primary/10 text-primary'
                    : 'text-muted-foreground hover:bg-accent hover:text-accent-foreground'
                }`}
                onClick={() => setSidebarOpen(false)}
              >
                <Icon className={`h-5 w-5 mr-3 ${isActive ? 'text-primary' : ''}`} />
                {item.name}
              </Link>
            );
          })}
        </nav>
        {/* ‚ö†Ô∏è NO poner usuario/logout aqu√≠ - va en el header */}
      </aside>

      {/* Main content */}
      <div className="flex-1 flex flex-col min-w-0">
        {/* Top bar */}
        <header className="sticky top-0 z-30 bg-background border-b">
          <div className="flex items-center justify-between h-16 px-4 lg:px-8">
            {/* Left side */}
            <div className="flex items-center space-x-4">
              <Button variant="ghost" size="icon" className="lg:hidden" onClick={() => setSidebarOpen(true)}>
                <Menu className="h-5 w-5" />
              </Button>
              <span className="text-sm text-muted-foreground hidden sm:block">
                Bienvenido, <span className="font-medium text-foreground">{user?.nombre}</span>
              </span>
            </div>

            {/* Right side - Actions */}
            <div className="flex items-center space-x-2">
              {/* Theme Selector */}
              <DropdownMenu>
                <DropdownMenuTrigger asChild>
                  <Button variant="ghost" size="icon">
                    <Palette className="h-5 w-5" />
                  </Button>
                </DropdownMenuTrigger>
                <DropdownMenuContent align="end">
                  {THEME_COLORS.map((color) => (
                    <DropdownMenuItem
                      key={color.value}
                      onClick={() => setTheme(color.value)}
                      className="flex items-center space-x-2"
                    >
                      <div
                        className="w-4 h-4 rounded-full"
                        style={{ backgroundColor: color.primary }}
                      />
                      <span>{color.name}</span>
                      {theme === color.value && <span className="ml-auto">‚úì</span>}
                    </DropdownMenuItem>
                  ))}
                </DropdownMenuContent>
              </DropdownMenu>

              {/* User Menu - Avatar con iniciales + dropdown */}
              <DropdownMenu>
                <DropdownMenuTrigger asChild>
                  <Button variant="ghost" className="flex items-center gap-2">
                    <div className="w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center">
                      <span className="text-primary text-sm font-medium">
                        {user?.nombre?.charAt(0)}{user?.apellido?.charAt(0)}
                      </span>
                    </div>
                    <span className="hidden sm:block text-sm">{user?.nombre}</span>
                  </Button>
                </DropdownMenuTrigger>
                <DropdownMenuContent align="end" className="w-56">
                  <div className="px-2 py-1.5">
                    <p className="text-sm font-medium">{user?.nombre} {user?.apellido}</p>
                    <p className="text-xs text-muted-foreground capitalize">{user?.role}</p>
                  </div>
                  <DropdownMenuSeparator />
                  <DropdownMenuItem onClick={handleLogout}>
                    <LogOut className="h-4 w-4 mr-2" />
                    Cerrar sesi√≥n
                  </DropdownMenuItem>
                </DropdownMenuContent>
              </DropdownMenu>
            </div>
          </div>
        </header>

        <main className="flex-1 p-4 lg:p-8">
          <Outlet />
        </main>
      </div>
    </div>
  );
}
```

### 3.4 Clases CSS Cr√≠ticas

| Elemento | Clases | Prop√≥sito |
|----------|--------|-----------|
| Container | `min-h-screen bg-background flex` | Flexbox principal |
| Sidebar | `lg:relative flex-shrink-0 flex flex-col` | No se encoge |
| Main | `flex-1 flex flex-col min-w-0` | Ocupa resto del espacio |

### 3.5 Errores Comunes a Evitar

```tsx
// ‚ùå INCORRECTO - causa overflow
<div className="lg:pl-64">
  <main>...</main>
</div>

// ‚úÖ CORRECTO - flexbox
<div className="flex">
  <aside className="w-64 lg:relative flex-shrink-0">...</aside>
  <main className="flex-1 min-w-0">...</main>
</div>
```

---

## 4. Patr√≥n ABM Obligatorio (CR√çTICO)

> **‚ö†Ô∏è REGLA CR√çTICA:** TODOS los ABMs (Alta, Baja, Modificaci√≥n) de la aplicaci√≥n DEBEN seguir este patr√≥n. NO crear p√°ginas separadas para agregar/editar.

### 4.1 Estructura de un ABM

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  P√ÅGINA PRINCIPAL (Listado)              ‚îÇ  SIDE MODAL (Sheet)     ‚îÇ
‚îÇ                                          ‚îÇ                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ  ‚îÇ T√≠tulo         [+ Nueva Cuadrilla]  ‚îÇ ‚îÇ  ‚îÇ Nueva Cuadrilla     ‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  ‚îÇ                     ‚îÇ‚îÇ
‚îÇ                                          ‚îÇ  ‚îÇ [Formulario]        ‚îÇ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚îÇ                     ‚îÇ‚îÇ
‚îÇ  ‚îÇ üîç Buscar...  [Filtro ‚ñº] [Filtro ‚ñº] ‚îÇ ‚îÇ  ‚îÇ - Nombre            ‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  ‚îÇ - Especialidad      ‚îÇ‚îÇ
‚îÇ                                          ‚îÇ  ‚îÇ - Zona              ‚îÇ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚îÇ                     ‚îÇ‚îÇ
‚îÇ  ‚îÇ Tabla con datos                     ‚îÇ ‚îÇ  ‚îÇ [Cancelar] [Guardar]‚îÇ‚îÇ
‚îÇ  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ  ‚îÇ üîß Cuadrilla Norte  | Alumbrado |‚úèÔ∏èüóë‚îÇ ‚îÇ                         ‚îÇ
‚îÇ  ‚îÇ üîß Cuadrilla Sur    | Bacheo    |‚úèÔ∏èüóë‚îÇ ‚îÇ    ‚óÑ‚îÄ‚îÄ Se abre desde   ‚îÇ
‚îÇ  ‚îÇ üîß Cuadrilla Centro | Limpieza  |‚úèÔ∏èüóë‚îÇ ‚îÇ        el listado      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 4.2 Reglas del Patr√≥n ABM

| Elemento | Implementaci√≥n | ‚ùå NO hacer |
|----------|----------------|-------------|
| **Listado** | P√°gina completa con tabla | P√°gina vac√≠a que solo lista IDs |
| **Crear nuevo** | Side modal (Sheet) | P√°gina `/cuadrillas/nuevo` |
| **Editar** | Side modal (Sheet) | P√°gina `/cuadrillas/:id/editar` |
| **Ver detalle** | Modal o expandir fila | P√°gina separada (excepto si es complejo) |
| **Eliminar** | Confirmaci√≥n en dialog | Eliminar sin confirmar |
| **Filtros** | En la misma p√°gina | P√°gina de filtros separada |

### 4.3 Por qu√© Side Modals (NO p√°ginas separadas)

- **Mejor UX**: No bloquean la vista del contenido principal
- **M√°s espacio**: Ideal para formularios largos
- **Consistencia**: Patr√≥n moderno usado en apps como Notion, Linear
- **Contexto**: El usuario no pierde de vista el listado mientras edita
- **Navegaci√≥n**: No se acumulan URLs en el historial

### 4.4 Componente Sheet de shadcn

```tsx
// src/components/ui/sheet.tsx (instalado con shadcn)
import {
  Sheet,
  SheetContent,
  SheetDescription,
  SheetHeader,
  SheetTitle,
  SheetTrigger,
  SheetFooter,
} from "@/components/ui/sheet"
```

### 4.5 Ejemplo: ABM con Side Modal

```tsx
// src/components/CuadrillaSheet.tsx
import { useState } from 'react';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import {
  Sheet,
  SheetContent,
  SheetDescription,
  SheetHeader,
  SheetTitle,
  SheetFooter,
} from '@/components/ui/sheet';
import { toast } from 'sonner';

interface CuadrillaSheetProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
  cuadrilla?: Cuadrilla | null;
  onSuccess: () => void;
}

export function CuadrillaSheet({ open, onOpenChange, cuadrilla, onSuccess }: CuadrillaSheetProps) {
  const [loading, setLoading] = useState(false);
  const isEditing = !!cuadrilla;

  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {
    e.preventDefault();
    setLoading(true);

    try {
      const formData = new FormData(e.currentTarget);
      const data = {
        nombre: formData.get('nombre'),
        especialidad: formData.get('especialidad'),
        telefono: formData.get('telefono'),
      };

      if (isEditing) {
        await cuadrillasAPI.update(cuadrilla.id, data);
        toast.success('Cuadrilla actualizada correctamente');
      } else {
        await cuadrillasAPI.create(data);
        toast.success('Cuadrilla creada correctamente');
      }

      onSuccess();
      onOpenChange(false);
    } catch (error) {
      toast.error('Error al guardar la cuadrilla');
    } finally {
      setLoading(false);
    }
  };

  return (
    <Sheet open={open} onOpenChange={onOpenChange}>
      <SheetContent className="sm:max-w-lg">
        <SheetHeader>
          <SheetTitle>{isEditing ? 'Editar' : 'Nueva'} Cuadrilla</SheetTitle>
          <SheetDescription>
            {isEditing ? 'Modifica los datos de la cuadrilla' : 'Completa los datos para crear una nueva cuadrilla'}
          </SheetDescription>
        </SheetHeader>

        <form onSubmit={handleSubmit} className="space-y-4 py-4">
          <div className="space-y-2">
            <Label htmlFor="nombre">Nombre</Label>
            <Input
              id="nombre"
              name="nombre"
              defaultValue={cuadrilla?.nombre}
              placeholder="Nombre de la cuadrilla"
              required
            />
          </div>

          <div className="space-y-2">
            <Label htmlFor="especialidad">Especialidad</Label>
            <Input
              id="especialidad"
              name="especialidad"
              defaultValue={cuadrilla?.especialidad}
              placeholder="Ej: Alumbrado, Baches, etc."
            />
          </div>

          <div className="space-y-2">
            <Label htmlFor="telefono">Tel√©fono</Label>
            <Input
              id="telefono"
              name="telefono"
              defaultValue={cuadrilla?.telefono}
              placeholder="Tel√©fono de contacto"
            />
          </div>

          <SheetFooter className="pt-4">
            <Button type="button" variant="outline" onClick={() => onOpenChange(false)}>
              Cancelar
            </Button>
            <Button type="submit" disabled={loading}>
              {loading ? 'Guardando...' : 'Guardar'}
            </Button>
          </SheetFooter>
        </form>
      </SheetContent>
    </Sheet>
  );
}
```

### 4.6 Uso en P√°gina de Listado

```tsx
// src/pages/Cuadrillas.tsx
import { useState } from 'react';
import { CuadrillaSheet } from '@/components/CuadrillaSheet';
import { Button } from '@/components/ui/button';
import { Plus, Pencil, Trash2 } from 'lucide-react';

export default function Cuadrillas() {
  const [sheetOpen, setSheetOpen] = useState(false);
  const [selectedCuadrilla, setSelectedCuadrilla] = useState<Cuadrilla | null>(null);

  const handleNew = () => {
    setSelectedCuadrilla(null);
    setSheetOpen(true);
  };

  const handleEdit = (cuadrilla: Cuadrilla) => {
    setSelectedCuadrilla(cuadrilla);
    setSheetOpen(true);
  };

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="text-2xl font-bold">Cuadrillas</h1>
        <Button onClick={handleNew}>
          <Plus className="h-4 w-4 mr-2" />
          Nueva Cuadrilla
        </Button>
      </div>

      {/* Table here */}
      <Table>
        {/* ... */}
        <TableCell>
          <Button variant="ghost" size="icon" onClick={() => handleEdit(cuadrilla)}>
            <Pencil className="h-4 w-4" />
          </Button>
        </TableCell>
      </Table>

      {/* Side Modal */}
      <CuadrillaSheet
        open={sheetOpen}
        onOpenChange={setSheetOpen}
        cuadrilla={selectedCuadrilla}
        onSuccess={fetchCuadrillas}
      />
    </div>
  );
}
```

### 4.7 ABMs de la Aplicaci√≥n (Todos con Side Modal)

| ABM | P√°gina Listado | Sheet Component | Campos del Formulario |
|-----|----------------|-----------------|----------------------|
| **Categor√≠as** | `/categorias` | `CategoriaSheet.tsx` | nombre, descripcion, icono, color, tiempo_resolucion, prioridad, activo |
| **Zonas** | `/zonas` | `ZonaSheet.tsx` | nombre, codigo, descripcion, latitud_centro, longitud_centro, activo |
| **Cuadrillas** | `/cuadrillas` | `CuadrillaSheet.tsx` | nombre, zona_id, especialidad, telefono, activo |
| **Usuarios** | `/usuarios` | `UsuarioSheet.tsx` | nombre, apellido, email, telefono, dni, direccion, rol, cuadrilla_id, activo |

> **Nota:** Los reclamos NO son un ABM tradicional porque tienen un flujo especial (crear ‚Üí asignar ‚Üí resolver). El formulario de nuevo reclamo puede ser p√°gina completa por su complejidad (mapa, fotos).

### 4.8 Checklist de Implementaci√≥n ABM

Para cada ABM de la tabla anterior:

- [ ] Crear p√°gina de listado con tabla moderna (√≠conos, badges de estado)
- [ ] Crear componente Sheet para agregar/editar
- [ ] Implementar filtros en la misma p√°gina
- [ ] Bot√≥n "Nuevo" abre Sheet (no navega a otra p√°gina)
- [ ] Bot√≥n "Editar" en cada fila abre Sheet con datos precargados
- [ ] Bot√≥n "Eliminar" muestra dialog de confirmaci√≥n
- [ ] Toast de √©xito/error en cada operaci√≥n
- [ ] Loading state en botones mientras guarda

---

## 5. Notificaciones (Toastr/Sonner)

### 5.1 Configuraci√≥n de Sonner

```bash
npm install sonner
```

### 5.2 Provider en App

```tsx
// src/App.tsx
import { Toaster } from 'sonner';

function App() {
  return (
    <>
      <RouterProvider router={router} />
      <Toaster
        position="top-right"
        richColors
        closeButton
      />
    </>
  );
}
```

### 5.3 Uso de Toasts

```tsx
import { toast } from 'sonner';

// Success
toast.success('Operaci√≥n exitosa');

// Error
toast.error('Ocurri√≥ un error');

// Warning
toast.warning('Atenci√≥n');

// Info
toast.info('Informaci√≥n importante');

// Con descripci√≥n
toast.success('Reclamo creado', {
  description: 'El reclamo #123 fue registrado correctamente',
});

// Con acci√≥n
toast('Reclamo eliminado', {
  action: {
    label: 'Deshacer',
    onClick: () => handleUndo(),
  },
});

// Loading
const toastId = toast.loading('Guardando...');
// Despu√©s
toast.success('Guardado', { id: toastId });
```

### 5.4 Patr√≥n para API Calls

```tsx
const handleSubmit = async (data: FormData) => {
  const loadingToast = toast.loading('Guardando cambios...');

  try {
    await api.save(data);
    toast.success('Cambios guardados correctamente', { id: loadingToast });
  } catch (error) {
    toast.error('Error al guardar', {
      id: loadingToast,
      description: error.message
    });
  }
};
```

---

## 6. Sistema de Paletas de Colores (OBLIGATORIO)

El sistema de paletas permite al usuario cambiar el color principal de la app desde el top bar.

### 6.1 Archivos a Crear

```
frontend/src/
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îî‚îÄ‚îÄ themes.ts           # Definici√≥n de paletas
‚îú‚îÄ‚îÄ contexts/
‚îÇ   ‚îî‚îÄ‚îÄ ThemeContext.tsx    # Context para el tema
‚îî‚îÄ‚îÄ index.css               # Variables CSS
```

### 6.2 themes.ts (COPIAR COMPLETO)

```tsx
// src/lib/themes.ts

export interface ThemeColors {
  primary: string;
  primaryForeground: string;
  ring: string;
}

export interface ThemeDefinition {
  name: string;
  value: string;
  colors: ThemeColors;
  preview: string; // Color hex para mostrar en el selector
}

export const themes: ThemeDefinition[] = [
  {
    name: 'Verde Municipal',
    value: 'municipal',
    preview: '#16a34a',
    colors: {
      primary: '142 76% 36%',
      primaryForeground: '210 40% 98%',
      ring: '142 76% 36%',
    },
  },
  {
    name: 'Azul Corporativo',
    value: 'corporate',
    preview: '#2563eb',
    colors: {
      primary: '221 83% 53%',
      primaryForeground: '210 40% 98%',
      ring: '221 83% 53%',
    },
  },
  {
    name: 'Morado Elegante',
    value: 'purple',
    preview: '#7c3aed',
    colors: {
      primary: '262 83% 58%',
      primaryForeground: '210 40% 98%',
      ring: '262 83% 58%',
    },
  },
  {
    name: 'Naranja Energ√≠a',
    value: 'orange',
    preview: '#ea580c',
    colors: {
      primary: '21 90% 48%',
      primaryForeground: '210 40% 98%',
      ring: '21 90% 48%',
    },
  },
  {
    name: 'Gris Neutro',
    value: 'neutral',
    preview: '#525252',
    colors: {
      primary: '0 0% 32%',
      primaryForeground: '210 40% 98%',
      ring: '0 0% 32%',
    },
  },
];

export const getTheme = (value: string): ThemeDefinition => {
  return themes.find((t) => t.value === value) || themes[0];
};
```

### 6.3 ThemeContext.tsx (COPIAR COMPLETO)

```tsx
// src/contexts/ThemeContext.tsx

import { createContext, useContext, useState, useEffect, ReactNode } from 'react';
import { themes, getTheme, ThemeDefinition } from '../lib/themes';

interface ThemeContextType {
  theme: string;
  themeDefinition: ThemeDefinition;
  setTheme: (theme: string) => void;
  availableThemes: ThemeDefinition[];
}

const ThemeContext = createContext<ThemeContextType | undefined>(undefined);

const THEME_STORAGE_KEY = 'app-theme';

export function ThemeProvider({ children }: { children: ReactNode }) {
  const [theme, setThemeState] = useState<string>(() => {
    if (typeof window !== 'undefined') {
      return localStorage.getItem(THEME_STORAGE_KEY) || 'municipal';
    }
    return 'municipal';
  });

  const setTheme = (newTheme: string) => {
    setThemeState(newTheme);
    localStorage.setItem(THEME_STORAGE_KEY, newTheme);
  };

  // Aplicar colores CSS cuando cambia el tema
  useEffect(() => {
    const themeData = getTheme(theme);
    const root = document.documentElement;

    root.style.setProperty('--primary', themeData.colors.primary);
    root.style.setProperty('--primary-foreground', themeData.colors.primaryForeground);
    root.style.setProperty('--ring', themeData.colors.ring);
  }, [theme]);

  const value: ThemeContextType = {
    theme,
    themeDefinition: getTheme(theme),
    setTheme,
    availableThemes: themes,
  };

  return (
    <ThemeContext.Provider value={value}>
      {children}
    </ThemeContext.Provider>
  );
}

export function useTheme(): ThemeContextType {
  const context = useContext(ThemeContext);
  if (!context) {
    throw new Error('useTheme must be used within a ThemeProvider');
  }
  return context;
}
```

### 6.4 index.css con Variables (COPIAR COMPLETO)

> **‚ö†Ô∏è IMPORTANTE:** NO usar `@apply` con clases que usan variables CSS (como `@apply border-border` o `@apply bg-primary`). Tailwind no puede resolver estas clases en tiempo de compilaci√≥n porque las variables CSS se eval√∫an en runtime. Usar CSS directo en su lugar.

```css
/* src/index.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 142 76% 36%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 142 76% 36%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 142 76% 36%;
    --primary-foreground: 210 40% 98%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 142 76% 36%;
  }
}

/* ‚ö†Ô∏è USAR CSS DIRECTO - NO @apply con variables CSS */
@layer base {
  * {
    border-color: hsl(var(--border));
  }
  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
  }
}

/* Componentes custom - CSS directo en vez de @apply */
.btn-primary {
  background-color: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
  font-weight: 500;
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  transition: background-color 0.2s;
}
.btn-primary:hover {
  background-color: hsl(var(--primary) / 0.9);
}

.btn-secondary {
  background-color: hsl(var(--secondary));
  color: hsl(var(--secondary-foreground));
  font-weight: 500;
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  transition: background-color 0.2s;
}
.btn-secondary:hover {
  background-color: hsl(var(--secondary) / 0.8);
}

.input-field {
  width: 100%;
  padding: 0.5rem 0.75rem;
  border: 1px solid hsl(var(--input));
  border-radius: 0.5rem;
  background-color: hsl(var(--background));
  outline: none;
  transition: all 0.2s;
}
.input-field:focus {
  box-shadow: 0 0 0 2px hsl(var(--ring));
  border-color: transparent;
}

.card {
  background-color: hsl(var(--card));
  border-radius: 0.75rem;
  box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  border: 1px solid hsl(var(--border));
  padding: 1.5rem;
}

.badge {
  display: inline-flex;
  align-items: center;
  padding: 0.125rem 0.625rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 500;
}

/* Badges por estado - colores fijos */
.badge-pendiente { background-color: #fef9c3; color: #854d0e; }
.badge-en_revision { background-color: #dbeafe; color: #1e40af; }
.badge-asignado { background-color: #f3e8ff; color: #6b21a8; }
.badge-en_proceso { background-color: #ffedd5; color: #9a3412; }
.badge-resuelto { background-color: #dcfce7; color: #166534; }
.badge-rechazado { background-color: #fee2e2; color: #991b1b; }
```

### 6.5 Configurar en main.tsx

```tsx
// src/main.tsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';
import { ThemeProvider } from './contexts/ThemeContext';
import './index.css';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <ThemeProvider>
      <App />
    </ThemeProvider>
  </React.StrictMode>
);
```

### 6.6 Selector de Paleta en el Header (COPIAR)

```tsx
// Dentro del Layout.tsx - Secci√≥n del Header

import { useTheme } from '../contexts/ThemeContext';
import { Palette, Check } from 'lucide-react';

// En el componente:
const { theme, setTheme, availableThemes } = useTheme();

// En el JSX del header (lado derecho):
<DropdownMenu>
  <DropdownMenuTrigger asChild>
    <button className="p-2 rounded-lg hover:bg-gray-100 transition-colors">
      <Palette className="h-5 w-5 text-gray-500" />
    </button>
  </DropdownMenuTrigger>
  <DropdownMenuContent align="end" className="w-48">
    <div className="px-2 py-1.5 text-sm font-semibold text-gray-500">
      Paleta de colores
    </div>
    {availableThemes.map((t) => (
      <DropdownMenuItem
        key={t.value}
        onClick={() => setTheme(t.value)}
        className="flex items-center gap-2 cursor-pointer"
      >
        <div
          className="w-4 h-4 rounded-full border border-gray-200"
          style={{ backgroundColor: t.preview }}
        />
        <span className="flex-1">{t.name}</span>
        {theme === t.value && (
          <Check className="h-4 w-4 text-primary" />
        )}
      </DropdownMenuItem>
    ))}
  </DropdownMenuContent>
</DropdownMenu>
```

### 6.7 tailwind.config.js para Variables CSS

```javascript
// tailwind.config.js
/** @type {import('tailwindcss').Config} */
export default {
  darkMode: ["class"],
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        secondary: {
          DEFAULT: "hsl(var(--secondary))",
          foreground: "hsl(var(--secondary-foreground))",
        },
        destructive: {
          DEFAULT: "hsl(var(--destructive))",
          foreground: "hsl(var(--destructive-foreground))",
        },
        muted: {
          DEFAULT: "hsl(var(--muted))",
          foreground: "hsl(var(--muted-foreground))",
        },
        accent: {
          DEFAULT: "hsl(var(--accent))",
          foreground: "hsl(var(--accent-foreground))",
        },
        popover: {
          DEFAULT: "hsl(var(--popover))",
          foreground: "hsl(var(--popover-foreground))",
        },
        card: {
          DEFAULT: "hsl(var(--card))",
          foreground: "hsl(var(--card-foreground))",
        },
      },
      borderRadius: {
        lg: "var(--radius)",
        md: "calc(var(--radius) - 2px)",
        sm: "calc(var(--radius) - 4px)",
      },
    },
  },
  plugins: [],
}
```

### 6.8 Checklist de Implementaci√≥n de Paletas

- [ ] Crear `src/lib/themes.ts`
- [ ] Crear `src/contexts/ThemeContext.tsx`
- [ ] Actualizar `src/index.css` con variables CSS
- [ ] Actualizar `tailwind.config.js` con colores HSL
- [ ] Envolver App con `<ThemeProvider>`
- [ ] Agregar dropdown de paleta en el header
- [ ] Verificar que los colores cambian al seleccionar paleta
- [ ] Verificar que persiste en localStorage

---

## 7. Listados en Pantalla Principal

### 7.1 Patr√≥n de P√°gina de Listado

```tsx
// src/pages/Reclamos.tsx
import { useState, useEffect } from 'react';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from '@/components/ui/table';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import { Badge } from '@/components/ui/badge';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Search, Filter, Plus } from 'lucide-react';

export default function Reclamos() {
  const [reclamos, setReclamos] = useState([]);
  const [loading, setLoading] = useState(true);
  const [filters, setFilters] = useState({ search: '', estado: '', tipo: '' });

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
        <h1 className="text-2xl font-bold">Reclamos</h1>
        <Button>
          <Plus className="h-4 w-4 mr-2" />
          Nuevo Reclamo
        </Button>
      </div>

      {/* Filters */}
      <Card>
        <CardContent className="pt-6">
          <div className="flex flex-col sm:flex-row gap-4">
            <div className="relative flex-1">
              <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
              <Input
                placeholder="Buscar por t√≠tulo o direcci√≥n..."
                className="pl-9"
                value={filters.search}
                onChange={(e) => setFilters({ ...filters, search: e.target.value })}
              />
            </div>
            <Select value={filters.estado} onValueChange={(v) => setFilters({ ...filters, estado: v })}>
              <SelectTrigger className="w-full sm:w-[180px]">
                <SelectValue placeholder="Estado" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="all">Todos</SelectItem>
                <SelectItem value="pendiente">Pendiente</SelectItem>
                <SelectItem value="en_proceso">En Proceso</SelectItem>
                <SelectItem value="resuelto">Resuelto</SelectItem>
              </SelectContent>
            </Select>
            <Select value={filters.tipo} onValueChange={(v) => setFilters({ ...filters, tipo: v })}>
              <SelectTrigger className="w-full sm:w-[180px]">
                <SelectValue placeholder="Tipo" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="all">Todos</SelectItem>
                <SelectItem value="bache">Bache</SelectItem>
                <SelectItem value="alumbrado">Alumbrado</SelectItem>
                <SelectItem value="basura">Basura</SelectItem>
              </SelectContent>
            </Select>
          </div>
        </CardContent>
      </Card>

      {/* Table */}
      <Card>
        <Table>
          <TableHeader>
            <TableRow>
              <TableHead>ID</TableHead>
              <TableHead>T√≠tulo</TableHead>
              <TableHead>Tipo</TableHead>
              <TableHead>Estado</TableHead>
              <TableHead>Fecha</TableHead>
              <TableHead className="text-right">Acciones</TableHead>
            </TableRow>
          </TableHeader>
          <TableBody>
            {reclamos.map((reclamo) => (
              <TableRow key={reclamo.id}>
                <TableCell className="font-medium">#{reclamo.id}</TableCell>
                <TableCell>{reclamo.titulo}</TableCell>
                <TableCell>
                  <Badge variant="outline">{reclamo.tipo}</Badge>
                </TableCell>
                <TableCell>
                  <Badge className={`badge-${reclamo.estado}`}>
                    {estadoLabels[reclamo.estado]}
                  </Badge>
                </TableCell>
                <TableCell>{formatDate(reclamo.created_at)}</TableCell>
                <TableCell className="text-right">
                  {/* Actions */}
                </TableCell>
              </TableRow>
            ))}
          </TableBody>
        </Table>
      </Card>
    </div>
  );
}
```

---

## 8. Iconos (Lucide React)

### 8.1 Instalaci√≥n

```bash
npm install lucide-react
```

### 8.2 Uso

```tsx
import { Home, User, Settings, Plus, Trash2, Pencil } from 'lucide-react';

<Home className="h-5 w-5" />
<Button>
  <Plus className="h-4 w-4 mr-2" />
  Nuevo
</Button>
```

### 8.3 Iconos Comunes

| Acci√≥n | Icono |
|--------|-------|
| Crear | `Plus`, `PlusCircle` |
| Editar | `Pencil`, `Edit` |
| Eliminar | `Trash2`, `X` |
| Ver | `Eye` |
| Buscar | `Search` |
| Filtrar | `Filter`, `SlidersHorizontal` |
| Configuraci√≥n | `Settings`, `Cog` |
| Usuario | `User`, `Users` |
| Cerrar | `X`, `XCircle` |
| Men√∫ | `Menu`, `MoreVertical` |

---

## 9. Responsive Breakpoints

| Breakpoint | Ancho | Uso |
|------------|-------|-----|
| (default) | < 640px | M√≥vil |
| `sm:` | ‚â• 640px | Tablet peque√±a |
| `md:` | ‚â• 768px | Tablet |
| `lg:` | ‚â• 1024px | Desktop (sidebar visible) |
| `xl:` | ‚â• 1280px | Desktop grande |

---

## 10. Checklist de UI/UX

- [ ] shadcn/ui instalado y configurado
- [ ] Layout con sidebar responsivo funcionando
- [ ] Top bar con selector de paleta
- [ ] Side modals (Sheet) para todos los ABMs
- [ ] Sonner/Toastr configurado para notificaciones
- [ ] 5 paletas de colores disponibles
- [ ] Iconos consistentes (Lucide React)
- [ ] Tablas con filtros y paginaci√≥n
- [ ] Formularios con validaci√≥n visual
- [ ] Loading states en botones y p√°ginas

---

## 11. Troubleshooting de CSS/Tailwind

### 11.1 Error: "The `border-border` class does not exist"

**S√≠ntoma:**
```
[postcss] The `border-border` class does not exist.
If `border-border` is a custom class, make sure it is defined within a `@layer` directive.
```

**Causa:** Usar `@apply` con clases que dependen de variables CSS (como `border-border`, `bg-primary`, `text-foreground`). Tailwind intenta resolver estas clases en tiempo de compilaci√≥n, pero las variables CSS se eval√∫an en runtime.

**Soluci√≥n:** Usar CSS directo en lugar de `@apply`:

```css
/* ‚ùå INCORRECTO - causa error */
@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* ‚úÖ CORRECTO - CSS directo */
@layer base {
  * {
    border-color: hsl(var(--border));
  }
  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
  }
}
```

### 11.2 Error: "The `bg-primary` class does not exist"

**Causa:** Mismo problema - usar `@apply bg-primary` dentro de `@layer components`.

**Soluci√≥n:** Para componentes custom, usar CSS directo:

```css
/* ‚ùå INCORRECTO */
.btn-primary {
  @apply bg-primary text-primary-foreground;
}

/* ‚úÖ CORRECTO */
.btn-primary {
  background-color: hsl(var(--primary));
  color: hsl(var(--primary-foreground));
}
```

### 11.3 Regla General para @apply

| Tipo de clase | ¬øUsar @apply? | Ejemplo |
|---------------|---------------|---------|
| Clases est√°ndar de Tailwind | ‚úÖ S√≠ | `@apply flex items-center p-4` |
| Clases con variables CSS | ‚ùå No | `@apply bg-primary border-border` |
| Colores de Tailwind est√°ndar | ‚úÖ S√≠ | `@apply bg-blue-500 text-white` |
| Colores custom con HSL | ‚ùå No | `@apply bg-background text-foreground` |

### 11.4 Cu√°ndo S√ç usar @apply

Solo con clases de Tailwind que NO usen variables CSS:

```css
/* ‚úÖ Esto S√ç funciona */
.badge {
  @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
}

/* ‚úÖ Colores fijos de Tailwind - tambi√©n funciona */
.badge-pendiente {
  @apply bg-yellow-100 text-yellow-800;
}
```

---

## 12. Componente ABMPage Reutilizable (IMPLEMENTADO)

> **‚ö†Ô∏è IMPORTANTE:** Este es el componente REAL usado en la aplicaci√≥n. Todos los ABMs DEBEN usar este componente.

### 12.1 Ubicaci√≥n y Estructura

```
frontend/src/components/ui/ABMPage.tsx
```

El componente exporta:
- `ABMPage` - Contenedor principal
- `ABMCard` - Tarjeta para grid con animaciones
- `ABMCardActions` - Botones de editar/eliminar
- `ABMSheetFooter` - Footer est√°ndar para modales
- `ABMBadge` - Badge de estado activo/inactivo
- `ABMInput` - Input con estilos del tema
- `ABMTextarea` - Textarea con estilos del tema
- `ABMSelect` - Select con estilos del tema

### 12.2 Props de ABMPage

```tsx
interface ABMPageProps {
  // Header
  title: string;           // T√≠tulo de la p√°gina
  buttonLabel: string;     // Texto del bot√≥n "Nuevo X"
  onAdd: () => void;       // Handler del bot√≥n

  // Search
  searchPlaceholder?: string;
  searchValue: string;
  onSearchChange: (value: string) => void;

  // Extra filters (opcional)
  extraFilters?: ReactNode;

  // Grid
  children: ReactNode;     // Las ABMCards
  emptyMessage?: string;
  isEmpty?: boolean;

  // Loading
  loading?: boolean;

  // Sheet (Side Modal)
  sheetOpen: boolean;
  sheetTitle: string;
  sheetDescription?: string;
  sheetContent: ReactNode;
  sheetFooter?: ReactNode;
  onSheetClose: () => void;
}
```

### 12.3 Uso T√≠pico

```tsx
import { ABMPage, ABMCard, ABMSheetFooter, ABMInput, ABMBadge } from '../components/ui/ABMPage';

export default function Categorias() {
  const [sheetOpen, setSheetOpen] = useState(false);
  const [search, setSearch] = useState('');

  return (
    <ABMPage
      title="Categor√≠as"
      buttonLabel="Nueva Categor√≠a"
      onAdd={() => setSheetOpen(true)}
      searchPlaceholder="Buscar categor√≠as..."
      searchValue={search}
      onSearchChange={setSearch}
      loading={loading}
      isEmpty={categorias.length === 0}
      sheetOpen={sheetOpen}
      sheetTitle="Nueva Categor√≠a"
      sheetContent={<FormularioCategor√≠a />}
      sheetFooter={
        <ABMSheetFooter
          onCancel={() => setSheetOpen(false)}
          onSave={handleSave}
          saving={saving}
        />
      }
      onSheetClose={() => setSheetOpen(false)}
    >
      {categorias.map((cat, index) => (
        <ABMCard key={cat.id} index={index} onClick={() => handleEdit(cat)}>
          <div className="flex justify-between">
            <h3 className="font-medium">{cat.nombre}</h3>
            <ABMBadge active={cat.activo} />
          </div>
        </ABMCard>
      ))}
    </ABMPage>
  );
}
```

### 12.4 ABMs que usan ABMPage

| ABM | Archivo | Sheet Mode |
|-----|---------|------------|
| Categor√≠as | `pages/Categorias.tsx` | create/edit |
| Zonas | `pages/Zonas.tsx` | create/edit |
| Cuadrillas | `pages/Cuadrillas.tsx` | create/edit |
| Usuarios | `pages/Usuarios.tsx` | create/edit |
| Reclamos | `pages/Reclamos.tsx` | create + view separado |
| Mis Reclamos | `pages/MisReclamos.tsx` | create + view separado |

---

## 13. Animaciones y Efectos Visuales (IMPLEMENTADO)

### 13.1 Transiciones de P√°gina

**Archivo:** `components/ui/PageTransition.tsx`

```tsx
import { ReactNode, useEffect, useState } from 'react';
import { useLocation } from 'react-router-dom';

export function PageTransition({ children }: { children: ReactNode }) {
  const location = useLocation();
  const [isVisible, setIsVisible] = useState(false);
  const [displayChildren, setDisplayChildren] = useState(children);

  useEffect(() => {
    setIsVisible(false);
    const timer = setTimeout(() => {
      setDisplayChildren(children);
      setIsVisible(true);
    }, 150);
    return () => clearTimeout(timer);
  }, [location.pathname]);

  useEffect(() => {
    setIsVisible(true);
  }, []);

  return (
    <div className={`
      transition-all duration-300 ease-out
      ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-2'}
    `}>
      {displayChildren}
    </div>
  );
}
```

**Uso en Layout:**
```tsx
<main className="p-6">
  <PageTransition>
    <Outlet />
  </PageTransition>
</main>
```

### 13.2 Animaciones en ABMCard

Las tarjetas tienen m√∫ltiples efectos:

```tsx
// Clases de animaci√≥n
className={`
  rounded-xl p-5
  transition-all duration-300 ease-out
  hover:scale-[1.03] hover:-translate-y-2
  hover:shadow-xl hover:shadow-black/5
  active:scale-[0.98]
  group relative overflow-hidden
  animate-fade-in-up
`}

// Delay escalonado para efecto stagger
style={{
  animationDelay: `${index * 50}ms`,
  animationFillMode: 'both',
}}
```

**Efectos incluidos:**
- **Entrada escalonada**: Cada card aparece con 50ms de delay
- **Hover lift**: Se eleva y escala al hacer hover
- **Active feedback**: Se reduce al hacer click
- **Gradient overlay**: Gradiente sutil en hover
- **Glow effect**: Brillo en bordes al hover

### 13.3 Keyframes Personalizados

El componente inyecta autom√°ticamente los CSS necesarios:

```css
@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fade-in-up 0.4s ease-out;
}
```

### 13.4 Efectos en Botones

**Shimmer effect** (brillo que pasa por el bot√≥n):

```tsx
<button className="relative overflow-hidden group">
  {/* Shimmer */}
  <div className="
    absolute inset-0 -translate-x-full
    group-hover:translate-x-full
    transition-transform duration-700
    bg-gradient-to-r from-transparent via-white/20 to-transparent
  " />

  {/* Icono que rota en hover */}
  <Plus className="h-4 w-4 mr-2 transition-transform duration-300 group-hover:rotate-180" />

  {buttonLabel}
</button>
```

### 13.5 Animaciones en Layout

**Sidebar links:**
```tsx
className={`
  transition-all duration-200 ease-out
  hover:scale-[1.02] hover:translate-x-1
  active:scale-[0.98]
  group
`}
```

**Active link indicator:**
```tsx
{isActive && (
  <div className="ml-auto w-1.5 h-1.5 rounded-full bg-white animate-pulse" />
)}
```

**Header animations:**
```css
@keyframes wiggle {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(-10deg); }
  75% { transform: rotate(10deg); }
}

/* Campana de notificaciones */
<Bell className="h-5 w-5 group-hover:animate-wiggle" />
```

### 13.6 Headers de Cards con Gradiente

Para cards con estado visual (como Reclamos):

```tsx
{/* Header con gradiente seg√∫n estado */}
<div
  className="flex items-center justify-between -mx-5 -mt-5 mb-4 px-4 py-3 rounded-t-xl"
  style={{
    background: `linear-gradient(135deg, ${estado.bg} 0%, ${estado.bg}80 100%)`,
    borderBottom: `1px solid ${estado.bg}`
  }}
>
  <div className="flex items-center gap-2">
    {/* Icono en caja */}
    <div
      className="w-8 h-8 rounded-lg flex items-center justify-center"
      style={{ backgroundColor: `${estado.text}15` }}
    >
      <FileText className="h-4 w-4" style={{ color: estado.text }} />
    </div>
    <span className="text-xs font-medium flex items-center gap-1" style={{ color: estado.text }}>
      <Hash className="h-3 w-3" />{id}
    </span>
  </div>
  {/* Badge flotante */}
  <span
    className="px-3 py-1 text-xs font-semibold rounded-full shadow-sm"
    style={{
      backgroundColor: theme.card,
      color: estado.text,
      boxShadow: `0 2px 4px ${estado.text}20`
    }}
  >
    {estadoLabel}
  </span>
</div>
```

### 13.7 Clases de Animaci√≥n Comunes

| Efecto | Clase | Uso |
|--------|-------|-----|
| Fade in/out | `transition-opacity duration-300` | Mostrar/ocultar |
| Scale on hover | `hover:scale-105 active:scale-95` | Botones, cards |
| Translate up | `hover:-translate-y-1` | Elevar elementos |
| Pulse | `animate-pulse` | Indicadores activos |
| Spin | `animate-spin` | Loading |
| Slide in | `translate-x-0 / -translate-x-full` | Sidebar |
| Backdrop blur | `backdrop-blur-md` | Header sticky |

### 13.8 Best Practices de Animaci√≥n

1. **Duraciones consistentes**: 200-300ms para micro-interacciones, 300-500ms para transiciones de p√°gina
2. **Ease functions**: `ease-out` para entradas, `ease-in` para salidas
3. **GPU acceleration**: Usar `transform` y `opacity` (evitar animar `width`, `height`)
4. **Reduce motion**: Respetar preferencias del usuario con `@media (prefers-reduced-motion)`
5. **Stagger effect**: Usar `animationDelay` con `index * 50ms` para grids

---

## 14. Chat Widget con IA (Ollama - DEFAULT)

> **IMPLEMENTADO:** El chat ya est√° funcionando con Ollama como provider por defecto.

### 14.1 Arquitectura

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      FRONTEND                                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ              ChatWidget.tsx                          ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - Bot√≥n flotante abajo-derecha                     ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - Modal de chat con historial                      ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - Usa variables del tema                           ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                            ‚îÇ                                 ‚îÇ
‚îÇ                            ‚ñº                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ              lib/api.ts                              ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  chatApi.sendMessage(mensaje)                       ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      BACKEND                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ              api/chat.py                             ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  POST /api/chat                                     ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  GET  /api/chat/status                              ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - Recibe mensaje del usuario                       ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - Genera contexto del sistema municipal            ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - Llama a Ollama (local)                           ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - Retorna respuesta                                ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                            ‚îÇ                                 ‚îÇ
‚îÇ                            ‚ñº                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ              Ollama (Local)                          ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - Sin API key, 100% local                          ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - Modelo: llama3.2 (default)                       ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - Puerto: http://localhost:11434                   ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 14.2 Requisitos - Ollama

**Instalar Ollama:** https://ollama.ai/download

```bash
# Descargar modelo (solo una vez)
ollama pull llama3.2

# Iniciar servidor
ollama serve
```

### 14.3 Backend - Endpoint de Chat (IMPLEMENTADO)

**Archivo:** `backend/api/chat.py`

```python
from fastapi import APIRouter, Depends, HTTPException
from pydantic import BaseModel
import httpx
import os
from core.security import get_current_user

router = APIRouter()

OLLAMA_URL = os.getenv("OLLAMA_URL", "http://localhost:11434")
OLLAMA_MODEL = os.getenv("OLLAMA_MODEL", "llama3.2")

SYSTEM_PROMPT = """Eres un asistente virtual del Sistema de Reclamos Municipales.
Tu rol es ayudar a los usuarios con:
- Informaci√≥n sobre c√≥mo crear reclamos
- Categor√≠as de reclamos disponibles
- Estados de reclamos: Nuevo, Asignado, En Proceso, Resuelto, Rechazado
- Tiempos estimados de resoluci√≥n
- Proceso de gesti√≥n de reclamos

Responde de forma amable, concisa y √∫til en espa√±ol."""

class ChatRequest(BaseModel):
    message: str
    history: list[dict] = []

class ChatResponse(BaseModel):
    response: str

@router.post("", response_model=ChatResponse)
async def chat(request: ChatRequest, current_user = Depends(get_current_user)):
    try:
        messages = [{"role": "system", "content": SYSTEM_PROMPT}]
        for msg in request.history[-10:]:
            messages.append(msg)
        messages.append({"role": "user", "content": request.message})

        async with httpx.AsyncClient(timeout=60.0) as client:
            response = await client.post(
                f"{OLLAMA_URL}/api/chat",
                json={"model": OLLAMA_MODEL, "messages": messages, "stream": False}
            )
            data = response.json()
            return ChatResponse(response=data["message"]["content"])
    except httpx.ConnectError:
        raise HTTPException(status_code=503, detail="Ollama no est√° corriendo")

@router.get("/status")
async def chat_status():
    # Verificar si Ollama est√° disponible
    ...
```

**Registrar en api/__init__.py:**
```python
from routers import chat
app.include_router(chat.router)
```

**Dependencia:**
```bash
pip install groq
# o agregar a requirements.txt: groq>=0.4.0
```

### 14.3 Frontend - API Client

**Agregar a:** `frontend/src/lib/api.ts`

```typescript
// Chat API
export const chatApi = {
  sendMessage: async (message: string, history: Array<{role: string, content: string}> = []) => {
    const response = await api.post('/chat', { message, history });
    return response.data;
  }
};
```

### 14.4 Frontend - ChatWidget Component

**Archivo:** `frontend/src/components/ChatWidget.tsx`

```tsx
import { useState, useRef, useEffect } from 'react';
import { MessageCircle, X, Send, Bot, User, Loader2 } from 'lucide-react';
import { useTheme } from '../contexts/ThemeContext';
import { chatApi } from '../lib/api';

interface Message {
  role: 'user' | 'assistant';
  content: string;
}

export function ChatWidget() {
  const { theme } = useTheme();
  const [isOpen, setIsOpen] = useState(false);
  const [messages, setMessages] = useState<Message[]>([]);
  const [input, setInput] = useState('');
  const [loading, setLoading] = useState(false);
  const messagesEndRef = useRef<HTMLDivElement>(null);

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  };

  useEffect(() => {
    scrollToBottom();
  }, [messages]);

  const sendMessage = async () => {
    if (!input.trim() || loading) return;

    const userMessage: Message = { role: 'user', content: input };
    setMessages(prev => [...prev, userMessage]);
    setInput('');
    setLoading(true);

    try {
      const response = await chatApi.sendMessage(input, messages);
      const assistantMessage: Message = { role: 'assistant', content: response.response };
      setMessages(prev => [...prev, assistantMessage]);
    } catch (error) {
      setMessages(prev => [...prev, {
        role: 'assistant',
        content: 'Lo siento, hubo un error. Por favor intenta de nuevo.'
      }]);
    } finally {
      setLoading(false);
    }
  };

  return (
    <>
      {/* Bot√≥n flotante */}
      <button
        onClick={() => setIsOpen(true)}
        className={`
          fixed bottom-6 right-6 z-50
          w-14 h-14 rounded-full
          flex items-center justify-center
          shadow-lg transition-all duration-300
          hover:scale-110 active:scale-95
          ${isOpen ? 'opacity-0 pointer-events-none' : 'opacity-100'}
        `}
        style={{
          background: `linear-gradient(135deg, ${theme.primary} 0%, ${theme.primaryHover} 100%)`,
          boxShadow: `0 4px 20px ${theme.primary}50`
        }}
      >
        <MessageCircle className="h-6 w-6 text-white" />
      </button>

      {/* Modal de chat */}
      {isOpen && (
        <div
          className="fixed bottom-6 right-6 z-50 w-96 h-[500px] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-fade-in-up"
          style={{
            backgroundColor: theme.card,
            border: `1px solid ${theme.border}`
          }}
        >
          {/* Header */}
          <div
            className="flex items-center justify-between px-4 py-3"
            style={{
              background: `linear-gradient(135deg, ${theme.primary} 0%, ${theme.primaryHover} 100%)`
            }}
          >
            <div className="flex items-center gap-2 text-white">
              <Bot className="h-5 w-5" />
              <span className="font-semibold">Asistente Municipal</span>
            </div>
            <button
              onClick={() => setIsOpen(false)}
              className="p-1 rounded-lg hover:bg-white/20 transition-colors"
            >
              <X className="h-5 w-5 text-white" />
            </button>
          </div>

          {/* Messages */}
          <div className="flex-1 overflow-y-auto p-4 space-y-4">
            {messages.length === 0 && (
              <div className="text-center py-8" style={{ color: theme.textSecondary }}>
                <Bot className="h-12 w-12 mx-auto mb-3 opacity-50" />
                <p className="text-sm">¬°Hola! Soy tu asistente virtual.</p>
                <p className="text-sm">¬øEn qu√© puedo ayudarte?</p>
              </div>
            )}
            {messages.map((msg, i) => (
              <div
                key={i}
                className={`flex gap-2 ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}
              >
                {msg.role === 'assistant' && (
                  <div
                    className="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0"
                    style={{ backgroundColor: `${theme.primary}20` }}
                  >
                    <Bot className="h-4 w-4" style={{ color: theme.primary }} />
                  </div>
                )}
                <div
                  className={`max-w-[80%] px-4 py-2 rounded-2xl text-sm ${
                    msg.role === 'user' ? 'rounded-br-sm' : 'rounded-bl-sm'
                  }`}
                  style={{
                    backgroundColor: msg.role === 'user' ? theme.primary : theme.backgroundSecondary,
                    color: msg.role === 'user' ? '#ffffff' : theme.text
                  }}
                >
                  {msg.content}
                </div>
                {msg.role === 'user' && (
                  <div
                    className="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0"
                    style={{ backgroundColor: theme.backgroundSecondary }}
                  >
                    <User className="h-4 w-4" style={{ color: theme.textSecondary }} />
                  </div>
                )}
              </div>
            ))}
            {loading && (
              <div className="flex gap-2">
                <div
                  className="w-8 h-8 rounded-full flex items-center justify-center"
                  style={{ backgroundColor: `${theme.primary}20` }}
                >
                  <Loader2 className="h-4 w-4 animate-spin" style={{ color: theme.primary }} />
                </div>
                <div
                  className="px-4 py-2 rounded-2xl rounded-bl-sm"
                  style={{ backgroundColor: theme.backgroundSecondary }}
                >
                  <div className="flex gap-1">
                    <span className="w-2 h-2 rounded-full animate-bounce" style={{ backgroundColor: theme.textSecondary, animationDelay: '0ms' }} />
                    <span className="w-2 h-2 rounded-full animate-bounce" style={{ backgroundColor: theme.textSecondary, animationDelay: '150ms' }} />
                    <span className="w-2 h-2 rounded-full animate-bounce" style={{ backgroundColor: theme.textSecondary, animationDelay: '300ms' }} />
                  </div>
                </div>
              </div>
            )}
            <div ref={messagesEndRef} />
          </div>

          {/* Input */}
          <div
            className="p-4 flex gap-2"
            style={{ borderTop: `1px solid ${theme.border}` }}
          >
            <input
              type="text"
              value={input}
              onChange={(e) => setInput(e.target.value)}
              onKeyDown={(e) => e.key === 'Enter' && sendMessage()}
              placeholder="Escribe tu mensaje..."
              className="flex-1 px-4 py-2 rounded-xl text-sm focus:outline-none focus:ring-2"
              style={{
                backgroundColor: theme.backgroundSecondary,
                color: theme.text,
                border: `1px solid ${theme.border}`
              }}
            />
            <button
              onClick={sendMessage}
              disabled={!input.trim() || loading}
              className="w-10 h-10 rounded-xl flex items-center justify-center transition-all duration-200 hover:scale-105 active:scale-95 disabled:opacity-50"
              style={{
                backgroundColor: theme.primary,
                color: '#ffffff'
              }}
            >
              <Send className="h-4 w-4" />
            </button>
          </div>
        </div>
      )}
    </>
  );
}
```

### 14.5 Integraci√≥n en Layout

**Agregar en:** `frontend/src/components/Layout.tsx`

```tsx
import { ChatWidget } from './ChatWidget';

export function Layout() {
  return (
    <div>
      {/* ... resto del layout ... */}

      {/* Chat Widget - siempre visible */}
      <ChatWidget />
    </div>
  );
}
```

### 14.6 Variables de Entorno Requeridas

**Backend (.env):**
```
GROQ_API_KEY=gsk_xxxxxxxxxxxx
```

**Obtener en:** https://console.groq.com/keys (gratis)

### 14.7 Personalizaci√≥n del System Prompt

Editar `SYSTEM_PROMPT` en `routers/chat.py` para ajustar el comportamiento:

```python
SYSTEM_PROMPT = """Eres un asistente virtual del Sistema de Reclamos Municipales de [NOMBRE_MUNICIPIO].

INFORMACI√ìN QUE PUEDES PROPORCIONAR:
- C√≥mo crear un nuevo reclamo
- Categor√≠as disponibles: Baches, Alumbrado, Limpieza, Agua, Veredas, etc.
- Estados de reclamos: Nuevo, Asignado, En Proceso, Resuelto, Rechazado
- Tiempos estimados de resoluci√≥n por categor√≠a
- Informaci√≥n sobre las cuadrillas de trabajo

LIMITACIONES:
- No puedes crear reclamos directamente
- No puedes ver el estado de reclamos espec√≠ficos
- Para consultas espec√≠ficas, dirigir al usuario a la secci√≥n "Mis Reclamos"

TONO: Amable, profesional, conciso. Respuestas de m√°ximo 3-4 oraciones."""
```

---

## 15. Sistema de Animaciones Fluidas (ASSET GLOBAL)

> **IMPLEMENTADO:** El archivo `frontend/src/styles/animations.css` contiene todas las animaciones globales de la app.

### 15.1 Importaci√≥n

Importar en `main.tsx` despu√©s de `index.css`:

```tsx
// src/main.tsx
import './index.css'
import './styles/animations.css'  // ‚Üê Agregar esta l√≠nea
```

### 15.2 Archivo animations.css Completo

**Ubicaci√≥n:** `frontend/src/styles/animations.css`

```css
/* Global Animation Styles */

:root {
  --animation-duration: 0.3s;
  --animation-timing: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Smooth transitions for theme changes */
* {
  transition: background-color var(--animation-duration) var(--animation-timing),
              border-color var(--animation-duration) var(--animation-timing),
              color var(--animation-duration) var(--animation-timing);
}

/* Glass morphism base */
.glass {
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

/* Hover animations */
.hover-lift {
  transition: transform var(--animation-duration) var(--animation-timing),
              box-shadow var(--animation-duration) var(--animation-timing);
}

.hover-lift:hover {
  transform: translateY(-4px);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
}

/* Glow animation */
@keyframes glow {
  0%, 100% {
    box-shadow: 0 0 20px currentColor;
  }
  50% {
    box-shadow: 0 0 40px currentColor, 0 0 60px currentColor;
  }
}

.glow-animation {
  animation: glow 2s ease-in-out infinite;
}

/* Pulse animation */
@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.pulse-animation {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Slide in animations */
@keyframes slideInLeft {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideInRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideInUp {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideInDown {
  from {
    transform: translateY(-20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.slide-in-left {
  animation: slideInLeft var(--animation-duration) var(--animation-timing);
}

.slide-in-right {
  animation: slideInRight var(--animation-duration) var(--animation-timing);
}

.slide-in-up {
  animation: slideInUp var(--animation-duration) var(--animation-timing);
}

.slide-in-down {
  animation: slideInDown var(--animation-duration) var(--animation-timing);
}

/* Fade animations */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in {
  animation: fadeIn var(--animation-duration) var(--animation-timing);
}

.fade-in-up {
  animation: fadeInUp 0.4s var(--animation-timing);
}

/* Scale animations */
@keyframes scaleIn {
  from {
    transform: scale(0.9);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

.scale-in {
  animation: scaleIn var(--animation-duration) var(--animation-timing);
}

/* Shimmer effect for loading */
@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.shimmer {
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.2) 50%,
    rgba(255, 255, 255, 0) 100%
  );
  background-size: 1000px 100%;
  animation: shimmer 2s infinite;
}

/* Floating animation */
@keyframes float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

.float-animation {
  animation: float 3s ease-in-out infinite;
}

/* Rotate animation */
@keyframes rotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.rotate-animation {
  animation: rotate 2s linear infinite;
}

/* Bounce animation */
@keyframes bounce {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-5px);
  }
}

.bounce-animation {
  animation: bounce 0.5s ease-in-out;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #3b82f6 0%, #8b5cf6 100%);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, #2563eb 0%, #7c3aed 100%);
}

/* Selection color */
::selection {
  background-color: #3b82f6;
  color: white;
}

/* Focus styles */
*:focus-visible {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
  border-radius: 4px;
}

/* Smooth page transitions */
.page-transition-enter {
  opacity: 0;
  transform: translateX(20px);
}

.page-transition-enter-active {
  opacity: 1;
  transform: translateX(0);
  transition: opacity var(--animation-duration) var(--animation-timing),
              transform var(--animation-duration) var(--animation-timing);
}

.page-transition-exit {
  opacity: 1;
  transform: translateX(0);
}

.page-transition-exit-active {
  opacity: 0;
  transform: translateX(-20px);
  transition: opacity var(--animation-duration) var(--animation-timing),
              transform var(--animation-duration) var(--animation-timing);
}

/* Gradient backgrounds for cards */
.card-gradient-blue {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%);
  border-left: 4px solid #3b82f6;
  position: relative;
  overflow: hidden;
}

.card-gradient-blue::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, #3b82f6, #8b5cf6);
}

.card-gradient-orange {
  background: linear-gradient(135deg, rgba(245, 158, 11, 0.15) 0%, rgba(239, 68, 68, 0.15) 100%);
  border-left: 4px solid #f59e0b;
  position: relative;
  overflow: hidden;
}

.card-gradient-orange::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, #f59e0b, #ef4444);
}

.card-gradient-green {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.15) 0%, rgba(6, 182, 212, 0.15) 100%);
  border-left: 4px solid #22c55e;
  position: relative;
  overflow: hidden;
}

.card-gradient-green::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, #22c55e, #06b6d4);
}

/* Gradient text */
.gradient-text-primary {
  background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.gradient-text-success {
  background: linear-gradient(135deg, #22c55e 0%, #06b6d4 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.gradient-text-warning {
  background: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.gradient-text-rainbow {
  background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 33%, #22c55e 66%, #06b6d4 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Staggered animation delays for lists */
.stagger-1 { animation-delay: 0.05s; }
.stagger-2 { animation-delay: 0.1s; }
.stagger-3 { animation-delay: 0.15s; }
.stagger-4 { animation-delay: 0.2s; }
.stagger-5 { animation-delay: 0.25s; }
.stagger-6 { animation-delay: 0.3s; }
.stagger-7 { animation-delay: 0.35s; }
.stagger-8 { animation-delay: 0.4s; }
.stagger-9 { animation-delay: 0.45s; }
.stagger-10 { animation-delay: 0.5s; }

/* Button gradient styles */
.btn-gradient-primary {
  background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
  color: white;
  transition: all 0.3s ease;
}

.btn-gradient-primary:hover {
  background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
  transform: translateY(-2px);
  box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
}

.btn-gradient-success {
  background: linear-gradient(135deg, #22c55e 0%, #06b6d4 100%);
  color: white;
  transition: all 0.3s ease;
}

.btn-gradient-success:hover {
  background: linear-gradient(135deg, #16a34a 0%, #0891b2 100%);
  transform: translateY(-2px);
  box-shadow: 0 10px 20px rgba(34, 197, 94, 0.3);
}

.btn-gradient-warning {
  background: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%);
  color: white;
  transition: all 0.3s ease;
}

.btn-gradient-warning:hover {
  background: linear-gradient(135deg, #d97706 0%, #dc2626 100%);
  transform: translateY(-2px);
  box-shadow: 0 10px 20px rgba(245, 158, 11, 0.3);
}

/* Column header gradients for Kanban */
.column-header-blue {
  background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
  color: white;
}

.column-header-orange {
  background: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%);
  color: white;
}

.column-header-green {
  background: linear-gradient(135deg, #22c55e 0%, #06b6d4 100%);
  color: white;
}

/* Badge gradients */
.badge-gradient-blue {
  background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
  color: white;
  padding: 2px 8px;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 600;
}

.badge-gradient-orange {
  background: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%);
  color: white;
  padding: 2px 8px;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 600;
}

.badge-gradient-green {
  background: linear-gradient(135deg, #22c55e 0%, #06b6d4 100%);
  color: white;
  padding: 2px 8px;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 600;
}
```

### 15.3 Clases de Animaci√≥n Disponibles

| Categor√≠a | Clases | Uso |
|-----------|--------|-----|
| **Fade** | `fade-in`, `fade-in-up` | Entrada suave de elementos |
| **Slide** | `slide-in-left`, `slide-in-right`, `slide-in-up`, `slide-in-down` | Entrada desde direcci√≥n |
| **Scale** | `scale-in` | Entrada con zoom |
| **Hover** | `hover-lift` | Elevar elemento al hover |
| **Glow** | `glow-animation` | Brillo pulsante |
| **Pulse** | `pulse-animation` | Opacidad pulsante |
| **Float** | `float-animation` | Flotar arriba/abajo |
| **Rotate** | `rotate-animation` | Rotaci√≥n continua |
| **Shimmer** | `shimmer` | Efecto de loading |
| **Bounce** | `bounce-animation` | Rebote |

### 15.4 Clases de Gradiente

| Tipo | Clases | Color |
|------|--------|-------|
| **Cards** | `card-gradient-blue`, `card-gradient-orange`, `card-gradient-green` | Fondo con borde lateral |
| **Texto** | `gradient-text-primary`, `gradient-text-success`, `gradient-text-warning`, `gradient-text-rainbow` | Texto con gradiente |
| **Botones** | `btn-gradient-primary`, `btn-gradient-success`, `btn-gradient-warning` | Bot√≥n con gradiente y hover |
| **Headers** | `column-header-blue`, `column-header-orange`, `column-header-green` | Header de columnas Kanban |
| **Badges** | `badge-gradient-blue`, `badge-gradient-orange`, `badge-gradient-green` | Badge con gradiente |

### 15.5 Efecto Stagger (Escalonado)

Para animar listas con delay incremental:

```tsx
{items.map((item, index) => (
  <div
    key={item.id}
    className={`fade-in-up stagger-${Math.min(index + 1, 10)}`}
  >
    {item.name}
  </div>
))}
```

**Clases disponibles:** `stagger-1` hasta `stagger-10` (50ms incremento)

### 15.6 Ejemplo de Uso en Kanban

```tsx
{/* Columna con animaci√≥n */}
<div className={`fade-in-up stagger-${colIndex + 1}`}>
  {/* Header con gradiente */}
  <div className={`${col.headerClass} px-4 py-3`}>
    <h2 className="font-semibold text-white">{col.titulo}</h2>
  </div>

  {/* Cards con animaci√≥n escalonada */}
  {items.map((item, index) => (
    <div
      key={item.id}
      className={`${col.cardClass} hover-lift fade-in-up`}
      style={{ animationDelay: `${index * 0.05}s` }}
    >
      {item.titulo}
    </div>
  ))}
</div>
```

### 15.7 Ejemplo de Texto con Gradiente

```tsx
<h1 className="text-2xl font-bold gradient-text-rainbow">
  Tablero
</h1>
```

### 15.8 Ejemplo de Bot√≥n con Gradiente

```tsx
<button className="btn-gradient-primary px-4 py-2 rounded-lg">
  Nuevo Reclamo
</button>
```

### 15.9 Variables CSS Configurables

Puedes personalizar la velocidad de las animaciones:

```css
:root {
  --animation-duration: 0.3s;  /* M√°s lento: 0.5s, M√°s r√°pido: 0.2s */
  --animation-timing: cubic-bezier(0.4, 0, 0.2, 1);  /* Ease est√°ndar */
}
```

### 15.10 Checklist de Implementaci√≥n

- [ ] Crear archivo `src/styles/animations.css`
- [ ] Importar en `main.tsx`
- [ ] Usar `fade-in-up` en elementos que aparecen
- [ ] Usar `hover-lift` en cards clickeables
- [ ] Usar clases `stagger-N` para listas animadas
- [ ] Usar `gradient-text-*` para t√≠tulos destacados
- [ ] Usar `btn-gradient-*` para botones principales
- [ ] Usar `card-gradient-*` para cards por estado/tipo

---

**Siguiente paso:** Continuar con `05_CREDENCIALES.md` para configurar credenciales de servicios externos.
